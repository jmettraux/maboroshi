<!DOCTYPE html>

<html lang="en">

  <head>

    <meta charset="utf-8" />
    <!--
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    -->

    <title>å¹» maboroshi</title>

    <link href="css/maboroshi.css" rel="stylesheet" type="text/css" />

    <script src="js/h.min.js"></script>
    <script src="js/maboroshi.js"></script>
    <script src="js/qrcode-04f46c6.min.js"></script>
  </head>

  <body>

    <pre id="result">
    </pre>

    <div id="directory">
      <ul>
        <li><a href="/?table=monster0.md">monster0.md</a></li>
        <li><a href="/?table=monster1.md">monster1.md</a></li>
          <!-- TODO add qrcodes -->
      </ul>
    </div>

    <script>

      var clog = console.log;
      var cerr = console.error;

      H.onDocumentReady(function() {

        H.hide('#result');

        var ss = window.location.search
          .split(/[?&]/)
          .filter(function(e) { return e.length > 0; });
        var table = ss.find(function(e) { return e.match(/^table=.+/); });

        if (table) {

          H.hide('#directory');

          var u = decodeURIComponent(table.slice(6));

          //var t = MaboTable.make(u);
          MaboTable.make(u + 'xxx')
            .then(function(t) {
              clog('t', t); })
              var r = t.roll();
              H.setText('#result', r);
              H.unhide('#result');
            .catch(function(e) {
              cerr(e); })
        }
      });
    </script>
  </body>
</html>

